{% set pageTitle = title + ' - ' + site.title %}

{% set currentUrl = env.SITE_URL + page.url %}

{% if not description %}
  {% set description = site.description %}
{% endif %}

<title>{{ pageTitle }}</title>
<link rel="canonical" href="{{ currentUrl }}"/>

<meta charset="utf-8"/>

{# <link rel="preload" as="style" href="main.css" fetchpriority="high" /> #}
{# <link rel="preload" as="script" href="main.js" fetchpriority="high" crossorigin /> #}
{# <link media="print" rel="stylesheet" href="main.css" onload="this.media='all';this.onload=null;"/> #}
<link rel="manifest" href="manifest.webmanifest"/>

<meta name="color-scheme" content="light dark"/>
<meta name="theme-color" media="(prefers-color-scheme: light)" content="{{ site.theme.light }}"/>
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="{{ site.theme.dark }}"/>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=2, user-scalable=yes, viewport-fit=cover"/>

<meta name="application-name" content="{{ site.title }}"/>
<meta property="og:site_name" content="{{ site.title }}"/>
<meta property="og:title" content="{{ pageTitle }}"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="{{ currentUrl }}"/>

{% set socialImage = sharing_image or thumbnail or hero or site.defaultSocialImage %}

<meta name="twitter:card" content="summary_large_image"/>
<meta property="og:image" content="{{ socialImage }}"/>
<meta property="og:image:secure_url" content="{{ socialImage }}"/>
<meta name="twitter:image" content="{{ socialImage }}"/>
<meta property="og:image:type" content="image/png"/>
<meta property="og:image:width" content="500"/>
<meta property="og:image:height" content="500"/>

{% if socialImageAlt %}
  <meta property="og:image:alt" content="{{ alt }}"/>
  <meta name="twitter:image:alt" content="{{ alt }}"/>
{% endif %}

<meta name="description" content="{{ description }}"/>
<meta name="twitter:description" content="{{ description }}"/>
<meta property="og:description" content="{{ description }}"/>

<meta name="twitter:site" content="@alidotmd"/>

{#
{% if authors %}
  <meta name="authors" content="{{ authors | sort }}" />
{% endif %}
#}

{% if tags %}
  <meta name="tags" content="{{ tags | sort }}"/>
{% endif %}

<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png"/>
<link rel="shortcut icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png"/>
<link rel="shortcut icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png"/>

<!-- TODO: use {{TEMPLATE_KEY}} and replace in esbuild -->
<!-- TODO: preconnect -->
<!-- TODO: preload config.js or better solution -->
<!-- TODO: preload fonts -->
<!-- FIXME: cdn connecting issues -->
<!-- FIXME: fetchpriority="high" -->

<!-- Add to home screen for Chrome on Android. Fallback for manifest.json -->
<meta name="mobile-web-app-capable" content="yes"/>
<!-- Add to home screen for Safari on iOS -->
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="apple-mobile-web-app-title" content="{{ site.title }}"/>
<link rel="apple-touch-startup-image" href="/img/icon-192.png"/>
<!-- Home screen icons -->
<link rel="apple-touch-icon" href="/img/icon-180.png"/>
<!-- Tile icon for Windows 8 (144x144 + tile color) -->
<meta name="msapplication-TileImage" content="/img/icon-512.png"/>
<meta name="msapplication-TileColor" content="{{ site.theme.light }}"/>
<meta name="msapplication-tap-highlight" content="no"/>
